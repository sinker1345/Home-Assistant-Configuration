# This (trigger) has to happen, while condition(s) are true, to do stuff (action)

# Check if Lexi is On XBox
  - id: "123456123456789"
    alias: Is Lexi on Xbox
    trigger:
      - platform: state
        entity_id: sensor.lexixboxone
        from: 'Offline'
        to: 'Online'
    action:
      - service: notify.google_push
        data_template:
          message: "Lexi has signed on to XBox"
          target: ["Tommy_Pixel_2XL", "Jessica_Phone", "MPU_Linux", "MPU_Chrome"]
          data:
           tag: 'Lexi Signed on to Xbox'

# Check if Lexi Signed Off XBox
  - id: "123456789456123"
    alias: Is Lexi off Xbox
    trigger:
      - platform: state
        entity_id: sensor.lexixboxone
        from: 'Online'
        to: 'Offline'
    action:
      - service: notify.google_push
        data_template:
          message: "Lexi has signed off of XBox"
          target: ["Tommy_Pixel_2XL", "Jessica_Phone", "MPU_Linux", "MPU_Chrome"]
          data:
           tag: 'Lexi Signed off of Xbox'

# Take Out Trash
  - id: "123456654984"
    alias: 'Trash Day'
    trigger:
      - platform: time
        at: '00:30:00'
    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{states.calendar.main.attributes.message == 'Trash Day'}}"
        - condition: state
          entity_id: calendar.main
          state: 'on'
    action:
     - service: notify.google_push
       data_template:
         message: "Take out the Trash"
         target: ["Tommy_Pixel_2XL", "MPU_Chrome", "MPU_Linux"]

# Take Out Recycling
  - id: "1234569874651689"
    alias: 'Recycling Day'
    trigger:
      - platform: time
        at: '00:30:00'
    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{states.calendar.main.attributes.message == 'Recycling Day'}}"
        - condition: state
          entity_id: calendar.main
          state: 'on'
    action:
     - service: notify.google_push
       data_template:
         message: "Take out the Recycling"
         target: ["Tommy_Pixel_2XL", "MPU_Chrome", "MPU_Linux"]

  - alias: 'Shopping List'
    trigger:
      - platform: state
        entity_id: device_tracker.google_maps_104723974144441113874
        to: 'Win-Dixie'
      - platform: state
        entity_id: device_tracker.google_maps_105472855536836656633
        to: 'Win-Dixie'
    action:
      - service: notify.google_push
        data_template:
          message: "Would you like to view the shopping list?"
          target: >-
            {% if states.device_tracker.google_maps_104723974144441113874.state == 'Win-Dixie' %}
              Jessica Phone
            {% else %}
              Tommy_Pixel_2XL
            {% endif %}
          data:
            actions:
              - action: "yes"
                title: 'Yes'
              - action: "no"
                title: 'No'

  - alias: 'View Shopping List'
    trigger:
      - platform: event
        event_type: html5_notification.clicked
        event_data:
          action: "yes"
    action:
      - service: notify.google_push
        data_template:
          message: "Click this to view shopping list"
          target: >-
            {% if states.device_tracker.google_maps_104723974144441113874.state == 'Win-Dixie' %}
              Jessica Phone
            {% else %}
              Tommy_Pixel_2XL
            {% endif %}
          data:
            url: !secret hass_url