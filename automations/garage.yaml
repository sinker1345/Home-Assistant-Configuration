  - alias: "Close Garage Door on Weekday"
    trigger:
      - platform: time
        at: '22:00:00'
    condition:
      condition: and
      conditions:
        - condition: time
          weekday:
            - mon
            - tue
            - wed
            - thu
        - condition: state
          entity_id: media_player.garage_chromecast
          state: 'off'
        - condition: numeric_state
          entity_id: sensor.garage_light_level
          below: 50
        - condition: state
          entity_id: sensor.garage_door
          state: 'open'
    action:
      - service: notify.telegram
        data_template:
          message: "The Garage Door is Open"
          target: 
            - 816032519

  - alias: "Close Garage Door on Weekend"
    trigger:
      - platform: time
        at: '00:00:00'
    condition:
      condition: and
      conditions:
        - condition: time
          weekday:
            - fri
            - sun
            - sat
        - condition: state
          entity_id: media_player.garage_chromecast
          state: 'off'
        - condition: numeric_state
          entity_id: sensor.garage_light_level
          below: 50
        - condition: state
          entity_id: sensor.garage_door
          state: 'open'
    action:
      - service: notify.telegram
        data_template:
          message: "The Garage Door is Open"
          target: 
            - 816032519

  - id: "123456"
    alias: "Connect OctoPi to Printer"
    trigger:
      - platform: state
        entity_id: switch.3d_printer_power
        from: 'off'
        to: 'on'
    action:
      - delay: '00:00:45'
      - service: rest_command.octopi_connect

  - id: "0123789"
    alias: '3D Printer is left on'
    trigger:
      - platform: state
        entity_id: sensor.octoprint_current_state
        to: 'Operational'
        for:
          minutes: 45
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: switch.3d_printer_power
          state: 'on'
    action:
      - service: switch.turn_off
        entity_id: switch.3d_printer_power

# 3D Printer Job 50% Complete
  - id: "12345665216546851"
    alias: 3D Printer Job 50% Complete
    trigger:
      - platform: numeric_state
        entity_id: sensor.octoprint_job_percentage
        above: 50
    action:
      - service: notify.telegram
        data_template:
          message: "3D print is 50% complete"
          target: 
            - 816032519

# 3D Printer Job Completed
  - id: "123456654620685"
    alias: 3D Printer Job Complete
    trigger:
      - platform: numeric_state
        entity_id: sensor.octoprint_job_percentage
        above: 99.9
    action:
      - service: notify.telegram
        data_template:
          message: "3D Print Complete"
          target: 
            - 816032519