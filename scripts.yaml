#Wunderground Weather Alert Notification
  notifyonwxalert:
    sequence:
        ## Dismiss any current alert so the UI isn't filled 
        ## up with these if there are more then one.
        ## Only show the latest alert
      - service: persistent_notification.dismiss
        data:
          notification_id: "wxalert"
        ## Create a new persistant notification in the UI for a new alert
      - service_template: >
          {% if states.sensor.pws_alerts.attributes.Message %}
          persistent_notification.create
          {% endif %}
        data_template:
          notification_id: "wxalert"
          message: '{{ states.sensor.pws_alerts.attributes.Message }}'
          title: '{{ states.sensor.pws_alerts.attributes.Description }}'

#Construct Morning Greeting
  morning_greeting:
    sequence:
      - service: tts.google_say
        data_template:
          entity_id: media_player.downstairs
          message: >
            {% if now().strftime("%H")|int < 12 %}
              Good Morning. 
            {% elif now().strftime("%H")|int < 18 %}
              Good Afternoon. 
            {% else %}
              Good Evening. 
            {% endif %}
              It's currently {{states.sensor.dark_sky_summary.state}} and {{states.sensor.dark_sky_temperature.state|round}} degrees in Kailua, 
              Today will be {{states.sensor.dark_sky_hourly_summary.state|replace(".", "")}}, 
              with a high of {{states.sensor.dark_sky_daytime_high_temperature.state|round}} degrees 
              and a {{states.sensor.pws_precip_1d.state}} percent chance of rain, 
            {% if now().strftime("%H")|int < 9 and now().strftime("%w")|int > 0 and now().strftime("%w")|int < 6 %}
              The current drive to Work in traffic is {{states.sensor.google_travel_time__driving.attributes.duration_in_traffic}}, 
            {% endif %}
            {% if states.calendar.main.state == 'on' and states.calendar.main.attributes.message == 'Trash Day' %}
              Don't forget to take out the trash,
            {% elif states.calendar.main.state == 'on' and states.calendar.main.attributes.message == 'Recycling Day' %}
              Don't forget to take out the recycling,
            {% elif states.calendar.main.state == 'on' %}
              you have a calendar event today. It is {{states.calendar.main.attributes.message}},
            {% endif %}
            {% if states.calendar.holidays_in_united_states.state == 'on' %}
              Today is a holiday, it is {{states.calendar.holidays_in_united_states.attributes.message}},
            {% endif %}
            Have a Great Day!

#Download Movie Script
  download_movie:
    alias: download_movie
    sequence:
    - service: shell_command.download_movie
      data_template:
        movie: '{{ movie }}'

#Search Movie Option
  search_movie:
    alias: search_movie
    sequence:
    - service: shell_command.search_movie
      data_template:
        movie: '{{ movie }}'

#Download Option Script
  download_option:
    alias: download_option
    sequence:
    - service: shell_command.download_option
      data_template:
        option: '{{ option }}'
