  notifyonwxalert:
    sequence:
        ## Dismiss any current alert so the UI isn't filled 
        ## up with these if there are more then one.
        ## Only show the latest alert
      - service: persistent_notification.dismiss
        data:
          notification_id: "wxalert"
        ## Create a new persistant notification in the UI for a new alert
      - service_template: >
          {% if states.sensor.pws_alerts.attributes.Message %}
          persistent_notification.create
          {% endif %}
        data_template:
          notification_id: "wxalert"
          message: '{{ states.sensor.pws_alerts.attributes.Message }}'
          title: '{{ states.sensor.pws_alerts.attributes.Description }}'

  morning_greeting:
    sequence:
      - service: tts.google_say
        data_template:
          entity_id: media_player.kitchen_speaker
          message: >
            {% if now().strftime("%H")|int < 12 %}
              Good Morning.
            {% elif now().strftime("%H")|int < 18 %}
              Good Afternoon.
            {% else %}
              Good Evening.
            {% endif %}
              It's currently {{states.sensor.dark_sky_summary.state}} and {{states.sensor.dark_sky_temperature.state|round}} degrees in Kailua. 
              Today will be {{states.sensor.dark_sky_hourly_summary.state|replace(".", "")}}, 
              with a high of {{states.sensor.dark_sky_daily_high_temperature.state|round}} degrees 
              and a {{states.sensor.pws_precip_1d.state}} percent chance of rain.
            {% if now().strftime("%H")|int < 9 and now().strftime("%w")|int > 0 and now().strftime("%w")|int < 6 %}
              The current drive to Work in traffic is {{states.sensor.google_travel_time__driving.attributes.duration_in_traffic}}.
              Have a great day!
            {% endif %}